{"ast":null,"code":"import { select } from '@ngrx/store';\nimport { environment } from 'src/environments/environment';\nimport { getFeedAction } from '../../store/actions/getFeed.action';\nimport { feedSelector } from '../../store/selectors/feedSelector';\nimport { parseUrl, stringify } from 'query-string';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../pagination/pagination.component\";\n\nconst _c0 = function (a1) {\n  return [\"/profiles\", a1];\n};\n\nconst _c1 = function (a1) {\n  return [\"/articles\", a1];\n};\n\nfunction FeedComponent_div_0_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"a\", 5);\n    i0.ɵɵelement(3, \"img\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 7)(5, \"a\", 8);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"div\", 9)(10, \"a\", 5)(11, \"h1\", 10);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\", 11);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const article_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(8, _c0, article_r2.author.username));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", article_r2.author.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(10, _c0, article_r2.author.username));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", article_r2.author.username, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(article_r2.createdAt);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(12, _c1, article_r2.slug));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(article_r2.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(article_r2.description);\n  }\n}\n\nfunction FeedComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, FeedComponent_div_0_div_1_Template, 15, 14, \"div\", 1);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelement(3, \"app-pagination\", 2);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", (tmp_0_0 = i0.ɵɵpipeBind1(2, 4, ctx_r0.feed$)) == null ? null : tmp_0_0.articles);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"limit\", ctx_r0.limit)(\"url\", ctx_r0.baseUrl)(\"currentPage\", ctx_r0.currentPage);\n  }\n}\n\nexport class FeedComponent {\n  constructor(store, router, route) {\n    this.store = store;\n    this.router = router;\n    this.route = route;\n    this.limit = environment.limit;\n  }\n\n  ngOnInit() {\n    this.initValues();\n    this.initListeners();\n  }\n\n  initValues() {\n    this.feed$ = this.store.pipe(select(feedSelector));\n    this.baseUrl = this.router.url.split('?')[0];\n  }\n\n  initListeners() {\n    this.queryParamsSubscription$ = this.route.queryParams.subscribe(params => {\n      this.currentPage = Number(params.page || '1');\n      this.fetchData();\n    });\n  }\n\n  fetchData() {\n    const offset = this.currentPage * this.limit - this.limit;\n    const parsedUrl = parseUrl(this.apiUrlProps);\n    const stringifiedParams = stringify(Object.assign({\n      limit: this.limit,\n      offset\n    }, parsedUrl.query));\n    const apiUrlWithParams = `${parsedUrl.url}?${stringifiedParams}`;\n    this.store.dispatch(getFeedAction({\n      url: apiUrlWithParams\n    }));\n  }\n\n  ngOnDestroy() {\n    this.queryParamsSubscription$.unsubscribe();\n  }\n\n}\n\nFeedComponent.ɵfac = function FeedComponent_Factory(t) {\n  return new (t || FeedComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n};\n\nFeedComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FeedComponent,\n  selectors: [[\"app-feed\"]],\n  inputs: {\n    apiUrlProps: [\"apiUrl\", \"apiUrlProps\"]\n  },\n  decls: 2,\n  vars: 3,\n  consts: [[4, \"ngIf\"], [\"class\", \"article\", 4, \"ngFor\", \"ngForOf\"], [3, \"limit\", \"url\", \"currentPage\"], [1, \"article\"], [1, \"author-meta\"], [3, \"routerLink\"], [1, \"author-image\", 3, \"src\"], [1, \"author-data\"], [1, \"author-name\", 3, \"routerLink\"], [1, \"article-content-block\"], [1, \"article-title\"], [1, \"article-description\"]],\n  template: function FeedComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, FeedComponent_div_0_Template, 4, 6, \"div\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.feed$));\n    }\n  },\n  directives: [i3.NgIf, i3.NgForOf, i2.RouterLinkWithHref, i4.PaginationComponent],\n  pipes: [i3.AsyncPipe],\n  styles: [\"a[_ngcontent-%COMP%] {\\n  text-decoration: none;\\n  color: black;\\n}\\n\\na[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover {\\n  cursor: pointer;\\n}\\n\\nh1[_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n\\n.article[_ngcontent-%COMP%] {\\n  border: none;\\n  border-radius: 5px;\\n  padding: 20px;\\n  width: 900px;\\n  margin-bottom: 20px;\\n  box-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.2);\\n}\\n\\n.author-meta[_ngcontent-%COMP%] {\\n  display: flex;\\n  column-gap: 10px;\\n}\\n\\n.author-data[_ngcontent-%COMP%] {\\n  display: inherit;\\n  flex-flow: column nowrap;\\n  row-gap: 3px;\\n}\\n\\n.author-image[_ngcontent-%COMP%] {\\n  border-radius: 50%;\\n  height: 45px;\\n  width: 45px;\\n}\\n\\n.author-name[_ngcontent-%COMP%] {\\n  font-size: 18px;\\n  font-weight: 400;\\n}\\n\\n.article-title[_ngcontent-%COMP%] {\\n  padding-top: 10px;\\n  font-weight: 500;\\n  font-size: 30px;\\n}\\n\\n.article-description[_ngcontent-%COMP%] {\\n  padding-top: 5px;\\n  font-weight: 400;\\n  padding-left: 2px;\\n  opacity: 0.8;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZlZWQuY29tcG9uZW50LnNjc3MiLCIuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcTXklMjBwcm9nZWN0c1xcSlNcXEFuZ3VsYXJcXFByYWN0aWNlQ291cnNlXFxjb3Vyc2UtYXBwXFxzcmNcXGFwcFxcZ2xvYmFsRmVlZFxcY29tcG9uZW50c1xcZmVlZFxcZmVlZC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHFCQUFBO0VBQ0EsWUFBQTtBQ0NKOztBREVBO0VBQ0ksZUFBQTtBQ0NKOztBREVBO0VBQ0ksU0FBQTtBQ0NKOztBREVBO0VBQ0ksWUFBQTtFQUNBLGtCQUFBO0VBQ0EsYUFBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtFQUNBLDhDQUFBO0FDQ0o7O0FERUE7RUFDSSxhQUFBO0VBQ0EsZ0JBQUE7QUNDSjs7QURFQTtFQUNJLGdCQUFBO0VBQ0Esd0JBQUE7RUFDQSxZQUFBO0FDQ0o7O0FERUE7RUFDSSxrQkFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0FDQ0o7O0FERUE7RUFDSSxlQUFBO0VBQ0EsZ0JBQUE7QUNDSjs7QURFQTtFQUNJLGlCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxlQUFBO0FDQ0o7O0FERUE7RUFDSSxnQkFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7RUFDQSxZQUFBO0FDQ0oiLCJmaWxlIjoiZmVlZC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImEge1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gICAgY29sb3I6IGJsYWNrO1xyXG59XHJcblxyXG5hIDpob3ZlciB7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbmgxIHtcclxuICAgIG1hcmdpbjogMDtcclxufVxyXG5cclxuLmFydGljbGUge1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgcGFkZGluZzogMjBweDtcclxuICAgIHdpZHRoOiA5MDBweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgICBib3gtc2hhZG93OiAycHggMnB4IDJweCAycHggcmdiYSgwLCAwLCAwLCAwLjIpO1xyXG59XHJcblxyXG4uYXV0aG9yLW1ldGEge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGNvbHVtbi1nYXA6IDEwcHg7XHJcbn1cclxuXHJcbi5hdXRob3ItZGF0YSB7XHJcbiAgICBkaXNwbGF5OiBpbmhlcml0O1xyXG4gICAgZmxleC1mbG93OiBjb2x1bW4gbm93cmFwO1xyXG4gICAgcm93LWdhcDogM3B4O1xyXG59XHJcblxyXG4uYXV0aG9yLWltYWdlIHtcclxuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICAgIGhlaWdodDogNDVweDtcclxuICAgIHdpZHRoOiA0NXB4O1xyXG59XHJcblxyXG4uYXV0aG9yLW5hbWUge1xyXG4gICAgZm9udC1zaXplOiAxOHB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IDQwMDtcclxufVxyXG5cclxuLmFydGljbGUtdGl0bGUge1xyXG4gICAgcGFkZGluZy10b3A6IDEwcHg7XHJcbiAgICBmb250LXdlaWdodDogNTAwO1xyXG4gICAgZm9udC1zaXplOiAzMHB4O1xyXG59XHJcblxyXG4uYXJ0aWNsZS1kZXNjcmlwdGlvbiB7XHJcbiAgICBwYWRkaW5nLXRvcDogNXB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IDQwMDtcclxuICAgIHBhZGRpbmctbGVmdDogMnB4O1xyXG4gICAgb3BhY2l0eTogMC44O1xyXG59IiwiYSB7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgY29sb3I6IGJsYWNrO1xufVxuXG5hIDpob3ZlciB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuaDEge1xuICBtYXJnaW46IDA7XG59XG5cbi5hcnRpY2xlIHtcbiAgYm9yZGVyOiBub25lO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIHdpZHRoOiA5MDBweDtcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgYm94LXNoYWRvdzogMnB4IDJweCAycHggMnB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcbn1cblxuLmF1dGhvci1tZXRhIHtcbiAgZGlzcGxheTogZmxleDtcbiAgY29sdW1uLWdhcDogMTBweDtcbn1cblxuLmF1dGhvci1kYXRhIHtcbiAgZGlzcGxheTogaW5oZXJpdDtcbiAgZmxleC1mbG93OiBjb2x1bW4gbm93cmFwO1xuICByb3ctZ2FwOiAzcHg7XG59XG5cbi5hdXRob3ItaW1hZ2Uge1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIGhlaWdodDogNDVweDtcbiAgd2lkdGg6IDQ1cHg7XG59XG5cbi5hdXRob3ItbmFtZSB7XG4gIGZvbnQtc2l6ZTogMThweDtcbiAgZm9udC13ZWlnaHQ6IDQwMDtcbn1cblxuLmFydGljbGUtdGl0bGUge1xuICBwYWRkaW5nLXRvcDogMTBweDtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgZm9udC1zaXplOiAzMHB4O1xufVxuXG4uYXJ0aWNsZS1kZXNjcmlwdGlvbiB7XG4gIHBhZGRpbmctdG9wOiA1cHg7XG4gIGZvbnQtd2VpZ2h0OiA0MDA7XG4gIHBhZGRpbmctbGVmdDogMnB4O1xuICBvcGFjaXR5OiAwLjg7XG59Il19 */\"]\n});","map":{"version":3,"sources":["D:/My progects/JS/Angular/PracticeCourse/course-app/src/app/globalFeed/components/feed/feed.component.ts"],"names":["select","environment","getFeedAction","feedSelector","parseUrl","stringify","i0","i1","i2","i3","i4","_c0","a1","_c1","FeedComponent_div_0_div_1_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","article_r2","$implicit","ɵɵadvance","ɵɵproperty","ɵɵpureFunction1","author","username","image","ɵɵsanitizeUrl","ɵɵtextInterpolate1","ɵɵtextInterpolate","createdAt","slug","title","description","FeedComponent_div_0_Template","ɵɵtemplate","ɵɵpipe","ctx_r0","ɵɵnextContext","tmp_0_0","ɵɵpipeBind1","feed$","articles","limit","baseUrl","currentPage","FeedComponent","constructor","store","router","route","ngOnInit","initValues","initListeners","pipe","url","split","queryParamsSubscription$","queryParams","subscribe","params","Number","page","fetchData","offset","parsedUrl","apiUrlProps","stringifiedParams","Object","assign","query","apiUrlWithParams","dispatch","ngOnDestroy","unsubscribe","ɵfac","FeedComponent_Factory","t","ɵɵdirectiveInject","Store","Router","ActivatedRoute","ɵcmp","ɵɵdefineComponent","type","selectors","inputs","decls","vars","consts","template","FeedComponent_Template","directives","NgIf","NgForOf","RouterLinkWithHref","PaginationComponent","pipes","AsyncPipe","styles"],"mappings":"AAAA,SAASA,MAAT,QAAuB,aAAvB;AACA,SAASC,WAAT,QAA4B,8BAA5B;AACA,SAASC,aAAT,QAA8B,oCAA9B;AACA,SAASC,YAAT,QAA6B,oCAA7B;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,cAApC;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,aAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,oCAApB;;AACA,MAAMC,GAAG,GAAG,UAAUC,EAAV,EAAc;AAAE,SAAO,CAAC,WAAD,EAAcA,EAAd,CAAP;AAA2B,CAAvD;;AACA,MAAMC,GAAG,GAAG,UAAUD,EAAV,EAAc;AAAE,SAAO,CAAC,WAAD,EAAcA,EAAd,CAAP;AAA2B,CAAvD;;AACA,SAASE,kCAAT,CAA4CC,EAA5C,EAAgDC,GAAhD,EAAqD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC/DT,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,KAAlC,EAAyC,CAAzC,EAA4C,CAA5C,EAA+C,GAA/C,EAAoD,CAApD;AACAX,IAAAA,EAAE,CAACY,SAAH,CAAa,CAAb,EAAgB,KAAhB,EAAuB,CAAvB;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,GAAlC,EAAuC,CAAvC;AACAX,IAAAA,EAAE,CAACc,MAAH,CAAU,CAAV;AACAd,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,MAArB;AACAX,IAAAA,EAAE,CAACc,MAAH,CAAU,CAAV;AACAd,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B,EAA+B,EAA/B,EAAmC,GAAnC,EAAwC,CAAxC,EAA2C,EAA3C,EAA+C,IAA/C,EAAqD,EAArD;AACAX,IAAAA,EAAE,CAACc,MAAH,CAAU,EAAV;AACAd,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,GAAtB,EAA2B,EAA3B;AACAX,IAAAA,EAAE,CAACc,MAAH,CAAU,EAAV;AACAd,IAAAA,EAAE,CAACa,YAAH;AACH;;AAAC,MAAIJ,EAAE,GAAG,CAAT,EAAY;AACV,UAAMM,UAAU,GAAGL,GAAG,CAACM,SAAvB;AACAhB,IAAAA,EAAE,CAACiB,SAAH,CAAa,CAAb;AACAjB,IAAAA,EAAE,CAACkB,UAAH,CAAc,YAAd,EAA4BlB,EAAE,CAACmB,eAAH,CAAmB,CAAnB,EAAsBd,GAAtB,EAA2BU,UAAU,CAACK,MAAX,CAAkBC,QAA7C,CAA5B;AACArB,IAAAA,EAAE,CAACiB,SAAH,CAAa,CAAb;AACAjB,IAAAA,EAAE,CAACkB,UAAH,CAAc,KAAd,EAAqBH,UAAU,CAACK,MAAX,CAAkBE,KAAvC,EAA8CtB,EAAE,CAACuB,aAAjD;AACAvB,IAAAA,EAAE,CAACiB,SAAH,CAAa,CAAb;AACAjB,IAAAA,EAAE,CAACkB,UAAH,CAAc,YAAd,EAA4BlB,EAAE,CAACmB,eAAH,CAAmB,EAAnB,EAAuBd,GAAvB,EAA4BU,UAAU,CAACK,MAAX,CAAkBC,QAA9C,CAA5B;AACArB,IAAAA,EAAE,CAACiB,SAAH,CAAa,CAAb;AACAjB,IAAAA,EAAE,CAACwB,kBAAH,CAAsB,GAAtB,EAA2BT,UAAU,CAACK,MAAX,CAAkBC,QAA7C,EAAuD,GAAvD;AACArB,IAAAA,EAAE,CAACiB,SAAH,CAAa,CAAb;AACAjB,IAAAA,EAAE,CAACyB,iBAAH,CAAqBV,UAAU,CAACW,SAAhC;AACA1B,IAAAA,EAAE,CAACiB,SAAH,CAAa,CAAb;AACAjB,IAAAA,EAAE,CAACkB,UAAH,CAAc,YAAd,EAA4BlB,EAAE,CAACmB,eAAH,CAAmB,EAAnB,EAAuBZ,GAAvB,EAA4BQ,UAAU,CAACY,IAAvC,CAA5B;AACA3B,IAAAA,EAAE,CAACiB,SAAH,CAAa,CAAb;AACAjB,IAAAA,EAAE,CAACyB,iBAAH,CAAqBV,UAAU,CAACa,KAAhC;AACA5B,IAAAA,EAAE,CAACiB,SAAH,CAAa,CAAb;AACAjB,IAAAA,EAAE,CAACyB,iBAAH,CAAqBV,UAAU,CAACc,WAAhC;AACH;AAAE;;AACH,SAASC,4BAAT,CAAsCrB,EAAtC,EAA0CC,GAA1C,EAA+C;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AACzDT,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,KAArB;AACAX,IAAAA,EAAE,CAAC+B,UAAH,CAAc,CAAd,EAAiBvB,kCAAjB,EAAqD,EAArD,EAAyD,EAAzD,EAA6D,KAA7D,EAAoE,CAApE;AACAR,IAAAA,EAAE,CAACgC,MAAH,CAAU,CAAV,EAAa,OAAb;AACAhC,IAAAA,EAAE,CAACY,SAAH,CAAa,CAAb,EAAgB,gBAAhB,EAAkC,CAAlC;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACH;;AAAC,MAAIJ,EAAE,GAAG,CAAT,EAAY;AACV,UAAMwB,MAAM,GAAGjC,EAAE,CAACkC,aAAH,EAAf;AACA,QAAIC,OAAJ;AACAnC,IAAAA,EAAE,CAACiB,SAAH,CAAa,CAAb;AACAjB,IAAAA,EAAE,CAACkB,UAAH,CAAc,SAAd,EAAyB,CAACiB,OAAO,GAAGnC,EAAE,CAACoC,WAAH,CAAe,CAAf,EAAkB,CAAlB,EAAqBH,MAAM,CAACI,KAA5B,CAAX,KAAkD,IAAlD,GAAyD,IAAzD,GAAgEF,OAAO,CAACG,QAAjG;AACAtC,IAAAA,EAAE,CAACiB,SAAH,CAAa,CAAb;AACAjB,IAAAA,EAAE,CAACkB,UAAH,CAAc,OAAd,EAAuBe,MAAM,CAACM,KAA9B,EAAqC,KAArC,EAA4CN,MAAM,CAACO,OAAnD,EAA4D,aAA5D,EAA2EP,MAAM,CAACQ,WAAlF;AACH;AAAE;;AACH,OAAO,MAAMC,aAAN,CAAoB;AACvBC,EAAAA,WAAW,CAACC,KAAD,EAAQC,MAAR,EAAgBC,KAAhB,EAAuB;AAC9B,SAAKF,KAAL,GAAaA,KAAb;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,KAAL,GAAaA,KAAb;AACA,SAAKP,KAAL,GAAa5C,WAAW,CAAC4C,KAAzB;AACH;;AACDQ,EAAAA,QAAQ,GAAG;AACP,SAAKC,UAAL;AACA,SAAKC,aAAL;AACH;;AACDD,EAAAA,UAAU,GAAG;AACT,SAAKX,KAAL,GAAa,KAAKO,KAAL,CAAWM,IAAX,CAAgBxD,MAAM,CAACG,YAAD,CAAtB,CAAb;AACA,SAAK2C,OAAL,GAAe,KAAKK,MAAL,CAAYM,GAAZ,CAAgBC,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAf;AACH;;AACDH,EAAAA,aAAa,GAAG;AACZ,SAAKI,wBAAL,GAAgC,KAAKP,KAAL,CAAWQ,WAAX,CAAuBC,SAAvB,CAAkCC,MAAD,IAAY;AACzE,WAAKf,WAAL,GAAmBgB,MAAM,CAACD,MAAM,CAACE,IAAP,IAAe,GAAhB,CAAzB;AACA,WAAKC,SAAL;AACH,KAH+B,CAAhC;AAIH;;AACDA,EAAAA,SAAS,GAAG;AACR,UAAMC,MAAM,GAAG,KAAKnB,WAAL,GAAmB,KAAKF,KAAxB,GAAgC,KAAKA,KAApD;AACA,UAAMsB,SAAS,GAAG/D,QAAQ,CAAC,KAAKgE,WAAN,CAA1B;AACA,UAAMC,iBAAiB,GAAGhE,SAAS,CAACiE,MAAM,CAACC,MAAP,CAAc;AAAE1B,MAAAA,KAAK,EAAE,KAAKA,KAAd;AAAqBqB,MAAAA;AAArB,KAAd,EAA6CC,SAAS,CAACK,KAAvD,CAAD,CAAnC;AACA,UAAMC,gBAAgB,GAAI,GAAEN,SAAS,CAACV,GAAI,IAAGY,iBAAkB,EAA/D;AACA,SAAKnB,KAAL,CAAWwB,QAAX,CAAoBxE,aAAa,CAAC;AAAEuD,MAAAA,GAAG,EAAEgB;AAAP,KAAD,CAAjC;AACH;;AACDE,EAAAA,WAAW,GAAG;AACV,SAAKhB,wBAAL,CAA8BiB,WAA9B;AACH;;AA9BsB;;AAgC3B5B,aAAa,CAAC6B,IAAd,GAAqB,SAASC,qBAAT,CAA+BC,CAA/B,EAAkC;AAAE,SAAO,KAAKA,CAAC,IAAI/B,aAAV,EAAyB1C,EAAE,CAAC0E,iBAAH,CAAqBzE,EAAE,CAAC0E,KAAxB,CAAzB,EAAyD3E,EAAE,CAAC0E,iBAAH,CAAqBxE,EAAE,CAAC0E,MAAxB,CAAzD,EAA0F5E,EAAE,CAAC0E,iBAAH,CAAqBxE,EAAE,CAAC2E,cAAxB,CAA1F,CAAP;AAA4I,CAArM;;AACAnC,aAAa,CAACoC,IAAd,GAAqB,aAAc9E,EAAE,CAAC+E,iBAAH,CAAqB;AAAEC,EAAAA,IAAI,EAAEtC,aAAR;AAAuBuC,EAAAA,SAAS,EAAE,CAAC,CAAC,UAAD,CAAD,CAAlC;AAAkDC,EAAAA,MAAM,EAAE;AAAEpB,IAAAA,WAAW,EAAE,CAAC,QAAD,EAAW,aAAX;AAAf,GAA1D;AAAsGqB,EAAAA,KAAK,EAAE,CAA7G;AAAgHC,EAAAA,IAAI,EAAE,CAAtH;AAAyHC,EAAAA,MAAM,EAAE,CAAC,CAAC,CAAD,EAAI,MAAJ,CAAD,EAAc,CAAC,OAAD,EAAU,SAAV,EAAqB,CAArB,EAAwB,OAAxB,EAAiC,SAAjC,CAAd,EAA2D,CAAC,CAAD,EAAI,OAAJ,EAAa,KAAb,EAAoB,aAApB,CAA3D,EAA+F,CAAC,CAAD,EAAI,SAAJ,CAA/F,EAA+G,CAAC,CAAD,EAAI,aAAJ,CAA/G,EAAmI,CAAC,CAAD,EAAI,YAAJ,CAAnI,EAAsJ,CAAC,CAAD,EAAI,cAAJ,EAAoB,CAApB,EAAuB,KAAvB,CAAtJ,EAAqL,CAAC,CAAD,EAAI,aAAJ,CAArL,EAAyM,CAAC,CAAD,EAAI,aAAJ,EAAmB,CAAnB,EAAsB,YAAtB,CAAzM,EAA8O,CAAC,CAAD,EAAI,uBAAJ,CAA9O,EAA4Q,CAAC,CAAD,EAAI,eAAJ,CAA5Q,EAAkS,CAAC,CAAD,EAAI,qBAAJ,CAAlS,CAAjI;AAAgcC,EAAAA,QAAQ,EAAE,SAASC,sBAAT,CAAgC9E,EAAhC,EAAoCC,GAApC,EAAyC;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AACjjBT,MAAAA,EAAE,CAAC+B,UAAH,CAAc,CAAd,EAAiBD,4BAAjB,EAA+C,CAA/C,EAAkD,CAAlD,EAAqD,KAArD,EAA4D,CAA5D;AACA9B,MAAAA,EAAE,CAACgC,MAAH,CAAU,CAAV,EAAa,OAAb;AACH;;AAAC,QAAIvB,EAAE,GAAG,CAAT,EAAY;AACVT,MAAAA,EAAE,CAACkB,UAAH,CAAc,MAAd,EAAsBlB,EAAE,CAACoC,WAAH,CAAe,CAAf,EAAkB,CAAlB,EAAqB1B,GAAG,CAAC2B,KAAzB,CAAtB;AACH;AAAE,GALiD;AAK/CmD,EAAAA,UAAU,EAAE,CAACrF,EAAE,CAACsF,IAAJ,EAAUtF,EAAE,CAACuF,OAAb,EAAsBxF,EAAE,CAACyF,kBAAzB,EAA6CvF,EAAE,CAACwF,mBAAhD,CALmC;AAKmCC,EAAAA,KAAK,EAAE,CAAC1F,EAAE,CAAC2F,SAAJ,CAL1C;AAK0DC,EAAAA,MAAM,EAAE,CAAC,slIAAD;AALlE,CAArB,CAAnC","sourcesContent":["import { select } from '@ngrx/store';\r\nimport { environment } from 'src/environments/environment';\r\nimport { getFeedAction } from '../../store/actions/getFeed.action';\r\nimport { feedSelector } from '../../store/selectors/feedSelector';\r\nimport { parseUrl, stringify } from 'query-string';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@ngrx/store\";\r\nimport * as i2 from \"@angular/router\";\r\nimport * as i3 from \"@angular/common\";\r\nimport * as i4 from \"../pagination/pagination.component\";\r\nconst _c0 = function (a1) { return [\"/profiles\", a1]; };\r\nconst _c1 = function (a1) { return [\"/articles\", a1]; };\r\nfunction FeedComponent_div_0_div_1_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"a\", 5);\r\n    i0.ɵɵelement(3, \"img\", 6);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(4, \"div\", 7)(5, \"a\", 8);\r\n    i0.ɵɵtext(6);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(7, \"span\");\r\n    i0.ɵɵtext(8);\r\n    i0.ɵɵelementEnd()()();\r\n    i0.ɵɵelementStart(9, \"div\", 9)(10, \"a\", 5)(11, \"h1\", 10);\r\n    i0.ɵɵtext(12);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(13, \"p\", 11);\r\n    i0.ɵɵtext(14);\r\n    i0.ɵɵelementEnd()()()();\r\n} if (rf & 2) {\r\n    const article_r2 = ctx.$implicit;\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(8, _c0, article_r2.author.username));\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"src\", article_r2.author.image, i0.ɵɵsanitizeUrl);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(10, _c0, article_r2.author.username));\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" \", article_r2.author.username, \" \");\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(article_r2.createdAt);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(12, _c1, article_r2.slug));\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(article_r2.title);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(article_r2.description);\r\n} }\r\nfunction FeedComponent_div_0_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵtemplate(1, FeedComponent_div_0_div_1_Template, 15, 14, \"div\", 1);\r\n    i0.ɵɵpipe(2, \"async\");\r\n    i0.ɵɵelement(3, \"app-pagination\", 2);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r0 = i0.ɵɵnextContext();\r\n    let tmp_0_0;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngForOf\", (tmp_0_0 = i0.ɵɵpipeBind1(2, 4, ctx_r0.feed$)) == null ? null : tmp_0_0.articles);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"limit\", ctx_r0.limit)(\"url\", ctx_r0.baseUrl)(\"currentPage\", ctx_r0.currentPage);\r\n} }\r\nexport class FeedComponent {\r\n    constructor(store, router, route) {\r\n        this.store = store;\r\n        this.router = router;\r\n        this.route = route;\r\n        this.limit = environment.limit;\r\n    }\r\n    ngOnInit() {\r\n        this.initValues();\r\n        this.initListeners();\r\n    }\r\n    initValues() {\r\n        this.feed$ = this.store.pipe(select(feedSelector));\r\n        this.baseUrl = this.router.url.split('?')[0];\r\n    }\r\n    initListeners() {\r\n        this.queryParamsSubscription$ = this.route.queryParams.subscribe((params) => {\r\n            this.currentPage = Number(params.page || '1');\r\n            this.fetchData();\r\n        });\r\n    }\r\n    fetchData() {\r\n        const offset = this.currentPage * this.limit - this.limit;\r\n        const parsedUrl = parseUrl(this.apiUrlProps);\r\n        const stringifiedParams = stringify(Object.assign({ limit: this.limit, offset }, parsedUrl.query));\r\n        const apiUrlWithParams = `${parsedUrl.url}?${stringifiedParams}`;\r\n        this.store.dispatch(getFeedAction({ url: apiUrlWithParams }));\r\n    }\r\n    ngOnDestroy() {\r\n        this.queryParamsSubscription$.unsubscribe();\r\n    }\r\n}\r\nFeedComponent.ɵfac = function FeedComponent_Factory(t) { return new (t || FeedComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute)); };\r\nFeedComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: FeedComponent, selectors: [[\"app-feed\"]], inputs: { apiUrlProps: [\"apiUrl\", \"apiUrlProps\"] }, decls: 2, vars: 3, consts: [[4, \"ngIf\"], [\"class\", \"article\", 4, \"ngFor\", \"ngForOf\"], [3, \"limit\", \"url\", \"currentPage\"], [1, \"article\"], [1, \"author-meta\"], [3, \"routerLink\"], [1, \"author-image\", 3, \"src\"], [1, \"author-data\"], [1, \"author-name\", 3, \"routerLink\"], [1, \"article-content-block\"], [1, \"article-title\"], [1, \"article-description\"]], template: function FeedComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵtemplate(0, FeedComponent_div_0_Template, 4, 6, \"div\", 0);\r\n        i0.ɵɵpipe(1, \"async\");\r\n    } if (rf & 2) {\r\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.feed$));\r\n    } }, directives: [i3.NgIf, i3.NgForOf, i2.RouterLinkWithHref, i4.PaginationComponent], pipes: [i3.AsyncPipe], styles: [\"a[_ngcontent-%COMP%] {\\n  text-decoration: none;\\n  color: black;\\n}\\n\\na[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover {\\n  cursor: pointer;\\n}\\n\\nh1[_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n\\n.article[_ngcontent-%COMP%] {\\n  border: none;\\n  border-radius: 5px;\\n  padding: 20px;\\n  width: 900px;\\n  margin-bottom: 20px;\\n  box-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.2);\\n}\\n\\n.author-meta[_ngcontent-%COMP%] {\\n  display: flex;\\n  column-gap: 10px;\\n}\\n\\n.author-data[_ngcontent-%COMP%] {\\n  display: inherit;\\n  flex-flow: column nowrap;\\n  row-gap: 3px;\\n}\\n\\n.author-image[_ngcontent-%COMP%] {\\n  border-radius: 50%;\\n  height: 45px;\\n  width: 45px;\\n}\\n\\n.author-name[_ngcontent-%COMP%] {\\n  font-size: 18px;\\n  font-weight: 400;\\n}\\n\\n.article-title[_ngcontent-%COMP%] {\\n  padding-top: 10px;\\n  font-weight: 500;\\n  font-size: 30px;\\n}\\n\\n.article-description[_ngcontent-%COMP%] {\\n  padding-top: 5px;\\n  font-weight: 400;\\n  padding-left: 2px;\\n  opacity: 0.8;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZlZWQuY29tcG9uZW50LnNjc3MiLCIuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcTXklMjBwcm9nZWN0c1xcSlNcXEFuZ3VsYXJcXFByYWN0aWNlQ291cnNlXFxjb3Vyc2UtYXBwXFxzcmNcXGFwcFxcZ2xvYmFsRmVlZFxcY29tcG9uZW50c1xcZmVlZFxcZmVlZC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHFCQUFBO0VBQ0EsWUFBQTtBQ0NKOztBREVBO0VBQ0ksZUFBQTtBQ0NKOztBREVBO0VBQ0ksU0FBQTtBQ0NKOztBREVBO0VBQ0ksWUFBQTtFQUNBLGtCQUFBO0VBQ0EsYUFBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtFQUNBLDhDQUFBO0FDQ0o7O0FERUE7RUFDSSxhQUFBO0VBQ0EsZ0JBQUE7QUNDSjs7QURFQTtFQUNJLGdCQUFBO0VBQ0Esd0JBQUE7RUFDQSxZQUFBO0FDQ0o7O0FERUE7RUFDSSxrQkFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0FDQ0o7O0FERUE7RUFDSSxlQUFBO0VBQ0EsZ0JBQUE7QUNDSjs7QURFQTtFQUNJLGlCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxlQUFBO0FDQ0o7O0FERUE7RUFDSSxnQkFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7RUFDQSxZQUFBO0FDQ0oiLCJmaWxlIjoiZmVlZC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImEge1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gICAgY29sb3I6IGJsYWNrO1xyXG59XHJcblxyXG5hIDpob3ZlciB7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbmgxIHtcclxuICAgIG1hcmdpbjogMDtcclxufVxyXG5cclxuLmFydGljbGUge1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgcGFkZGluZzogMjBweDtcclxuICAgIHdpZHRoOiA5MDBweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgICBib3gtc2hhZG93OiAycHggMnB4IDJweCAycHggcmdiYSgwLCAwLCAwLCAwLjIpO1xyXG59XHJcblxyXG4uYXV0aG9yLW1ldGEge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGNvbHVtbi1nYXA6IDEwcHg7XHJcbn1cclxuXHJcbi5hdXRob3ItZGF0YSB7XHJcbiAgICBkaXNwbGF5OiBpbmhlcml0O1xyXG4gICAgZmxleC1mbG93OiBjb2x1bW4gbm93cmFwO1xyXG4gICAgcm93LWdhcDogM3B4O1xyXG59XHJcblxyXG4uYXV0aG9yLWltYWdlIHtcclxuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICAgIGhlaWdodDogNDVweDtcclxuICAgIHdpZHRoOiA0NXB4O1xyXG59XHJcblxyXG4uYXV0aG9yLW5hbWUge1xyXG4gICAgZm9udC1zaXplOiAxOHB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IDQwMDtcclxufVxyXG5cclxuLmFydGljbGUtdGl0bGUge1xyXG4gICAgcGFkZGluZy10b3A6IDEwcHg7XHJcbiAgICBmb250LXdlaWdodDogNTAwO1xyXG4gICAgZm9udC1zaXplOiAzMHB4O1xyXG59XHJcblxyXG4uYXJ0aWNsZS1kZXNjcmlwdGlvbiB7XHJcbiAgICBwYWRkaW5nLXRvcDogNXB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IDQwMDtcclxuICAgIHBhZGRpbmctbGVmdDogMnB4O1xyXG4gICAgb3BhY2l0eTogMC44O1xyXG59IiwiYSB7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgY29sb3I6IGJsYWNrO1xufVxuXG5hIDpob3ZlciB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuaDEge1xuICBtYXJnaW46IDA7XG59XG5cbi5hcnRpY2xlIHtcbiAgYm9yZGVyOiBub25lO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIHdpZHRoOiA5MDBweDtcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgYm94LXNoYWRvdzogMnB4IDJweCAycHggMnB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcbn1cblxuLmF1dGhvci1tZXRhIHtcbiAgZGlzcGxheTogZmxleDtcbiAgY29sdW1uLWdhcDogMTBweDtcbn1cblxuLmF1dGhvci1kYXRhIHtcbiAgZGlzcGxheTogaW5oZXJpdDtcbiAgZmxleC1mbG93OiBjb2x1bW4gbm93cmFwO1xuICByb3ctZ2FwOiAzcHg7XG59XG5cbi5hdXRob3ItaW1hZ2Uge1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIGhlaWdodDogNDVweDtcbiAgd2lkdGg6IDQ1cHg7XG59XG5cbi5hdXRob3ItbmFtZSB7XG4gIGZvbnQtc2l6ZTogMThweDtcbiAgZm9udC13ZWlnaHQ6IDQwMDtcbn1cblxuLmFydGljbGUtdGl0bGUge1xuICBwYWRkaW5nLXRvcDogMTBweDtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgZm9udC1zaXplOiAzMHB4O1xufVxuXG4uYXJ0aWNsZS1kZXNjcmlwdGlvbiB7XG4gIHBhZGRpbmctdG9wOiA1cHg7XG4gIGZvbnQtd2VpZ2h0OiA0MDA7XG4gIHBhZGRpbmctbGVmdDogMnB4O1xuICBvcGFjaXR5OiAwLjg7XG59Il19 */\"] });\r\n"]},"metadata":{},"sourceType":"module"}